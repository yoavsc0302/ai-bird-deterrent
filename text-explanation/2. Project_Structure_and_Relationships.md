# Project Structure and Components

## Core Framework File
### `hailo_rpi_common.py`
- A framework file provided by Hailo for GStreamer-based applications
- Defines the base `GStreamerApp` class which handles:
  - GStreamer pipeline management
  - Basic video processing functionality
  - Event loop handling
  - Resource management
- Provides utility functions for pipeline creation
- **Note**: This is not our original code but a framework we build upon

## Main Application Files
### `main.py`
- Application entry point
- Handles command-line argument parsing
- Sets up signal handlers for graceful shutdown
- Creates and runs the main application instance

### `hailo_detection_app.py`
- Core application class that inherits from `GStreamerApp`
- Implements person detection and tracking logic
- Manages the GStreamer pipeline configuration
- Coordinates hardware control based on detection results
- Processes video frames through the Hailo-8L accelerator

## Hardware Control Files
### `servo_control.py`
- Manages the pan/tilt servo mechanism
- Handles angle calculations and movement control
- Provides precise positioning for person tracking
- Implements servo calibration and safety limits

### `laser_control.py`
- Controls the laser module through GPIO
- Provides simple on/off functionality
- Handles safe initialization and cleanup
- Manages laser state based on detection results

## Configuration and Setup
### `config.py`
- Loads and validates application configuration
- Manages path resolution for resources
- Ensures all required settings are present
- Provides centralized configuration access

### `config.yaml`
- Contains all application settings
- Configures hardware parameters
- Sets detection thresholds
- Defines servo and laser configurations

## Project Directory Structure
```
src/
├── __init__.py              # Package initialization
├── main.py                  # Entry point
├── hailo_detection_app.py   # Core application logic
├── hailo_rpi_common.py      # Hailo framework (from Hailo)
├── servo_control.py         # Servo management
├── laser_control.py         # Laser control
└── config.py               # Configuration handling
```

## Key Class Relationships
1. **Inheritance**:
   - `PersonDetectionApp` inherits from Hailo's `GStreamerApp`
   - This provides the base GStreamer functionality we build upon

2. **Composition**:
   - `PersonDetectionApp` uses `LaserController` and `PanTiltController`
   - Configuration is managed through `ConfigManager`

3. **Flow Control**:
   - `main.py` orchestrates the application lifecycle
   - `PersonDetectionApp` coordinates all components
   - Hardware controllers handle specific device operations